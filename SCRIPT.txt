CREATE database IF NOT EXISTS dbpedidos;

use dbpedidos;

CREATE TABLE IF NOT EXISTS produtos (
	idprodutos int not null auto_increment,
	nome VARCHAR(100) NOT NULL,
    precoUnitario decimal(2) not null,
    primary key (idprodutos)
);

CREATE TABLE IF NOT EXISTS clientes (
  idclientes INT(11) NOT NULL AUTO_INCREMENT,
  nome VARCHAR(100) NOT NULL,
  idade INT(11) NULL DEFAULT NULL,
  sexo VARCHAR(45) NULL DEFAULT NULL,
  endereco VARCHAR(100) NULL DEFAULT NULL,
  numero INT(11) NULL DEFAULT NULL,
  complemento VARCHAR(45) NULL DEFAULT NULL,
  primary key (idclientes)
);

CREATE TABLE IF NOT EXISTS pedidos (
	idpedidos int not null auto_increment,
    clientes_idclientes int not null,
    idproduto_pedido int not null,
    primary key (idpedidos),
	CONSTRAINT fk_id_clientes 
	FOREIGN KEY (clientes_idclientes) 
    REFERENCES clientes (idclientes)
    ON UPDATE CASCADE
    ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS produtos_pedido (
  idproduto_pedido INT(11) NOT NULL,
  quantidade INT(11) NOT NULL,
  produtos_idprodutos INT(11) NOT NULL,
  pedido_idpedidos INT(11) NOT NULL,
  PRIMARY KEY (idproduto_pedido),
  CONSTRAINT fk_idpedidos FOREIGN KEY (pedido_idpedidos) 
    REFERENCES pedidos (idpedidos)
    ON UPDATE CASCADE
    ON DELETE CASCADE,
  CONSTRAINT fk_id_produtos FOREIGN KEY (produtos_idprodutos) 
    REFERENCES produtos (idprodutos)
    ON UPDATE CASCADE
    ON DELETE CASCADE);

